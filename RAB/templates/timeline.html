{% extends "base.html" %}
{% block head %}
{{ super() }}
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/timeline.css') }}">
<style>
    #timeline-map {
        width: 100%;
        height: 50vh; /* Set the map height to 50% of the viewport height */
        margin-top: 20px;
    }
</style>
{% endblock %}
{% block content %}
<h2>Photo Timeline</h2>
<div id="timeline-container">
    <div id="timeline-slider">
        <input type="range" id="timeline-range">
        <div id="timeline-output"></div>
    </div>
    <div id="timeline-map"></div>
</div>
{% endblock %}
{% block scripts %}
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
var photoUrlBase = "{{ url_for('photo_view', photo_id=0) }}";
photoUrlBase = photoUrlBase.replace(/0$/, '');
var uploadsUrl = "{{ url_for('static', filename='uploads/') }}";
if (!uploadsUrl.endsWith('/')) {
    uploadsUrl += '/';
}
var previewsUrl = "{{ url_for('static', filename='previews/') }}";
if (!previewsUrl.endsWith('/')) {
    previewsUrl += '/';
}
</script>
<script src="{{ url_for('static', filename='js/timeline.js') }}" data-timeline-photos-url="{{ timeline_photos_url }}"></script>
<script>
// Ensure the map has the correct attribution "Benjamin" like in the stats map
document.addEventListener('DOMContentLoaded', function() {
    var map = L.map('timeline-map').setView([0, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Rabideauisms &copy; OpenStreetMap contributors',
        maxZoom: 19
    }).addTo(map);
});
</script>
{% endblock %}
